<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="fi" xml:lang="fi"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Kvantitatiiviset menetelmät -kurssin verkkokirja - 11&nbsp; Korrelaatio</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./khiinneliö.html" rel="next">
<link href="./ttesti.html" rel="prev">
<link href="./pics/logo_lapinakyva.png" rel="icon" type="image/png">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "Ei tuloksia",
    "search-matching-documents-text": "tulokset",
    "search-copy-link-title": "Kopioi linkki hakuun",
    "search-hide-matches-text": "Piilota loput tulokset",
    "search-more-match-text": "tulos tässä dokumentissa",
    "search-more-matches-text": "tulosta tässä dokumentissa",
    "search-clear-button-title": "Tyhjennä",
    "search-detached-cancel-button-title": "Peruuta",
    "search-submit-button-title": "Lähetä",
    "search-label": "Hae"
  }
}</script>

  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<meta name="twitter:title" content="Kvantitatiiviset menetelmät -kurssin verkkokirja - 11&nbsp; Korrelaatio">
<meta name="twitter:description" content="">
<meta name="twitter:image" content="korrelaatio_files/figure-html/fig-korrelaatio-1.png">
<meta name="twitter:card" content="summary_large_image">
</head>

<body class="nav-sidebar docked nav-fixed slimcontent">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">Kvantitatiiviset menetelmät</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Hae"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Vaihda navigointi" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link active" href="./index.html" rel="" target="" aria-current="page">
 <span class="menu-text">Aluksi</span></a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-ohjeita" role="button" data-bs-toggle="dropdown" aria-expanded="false" rel="" target="">
 <span class="menu-text">Ohjeita</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-ohjeita">    
        <li>
    <a class="dropdown-item" href="./visualisoinninalkeet.html" rel="" target="">
 <span class="dropdown-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Visualisoinnin alkeet</span></span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./ohjeitaviittaamiseen.html" rel="" target="">
 <span class="dropdown-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Ohjeita viittaamiseen</span></span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-tilastotiede" role="button" data-bs-toggle="dropdown" aria-expanded="false" rel="" target="">
 <span class="menu-text">Tilastotiede</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-tilastotiede">    
        <li>
    <a class="dropdown-item" href="./mittaustasot.html" rel="" target="">
 <span class="dropdown-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Muuttuja ja mittaustasot</span></span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./hypoteesitestaus.html" rel="" target="">
 <span class="dropdown-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Hypoteesitestaus</span></span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./mallioletukset.html" rel="" target="">
 <span class="dropdown-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Mallioletukset ja virhe</span></span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./sijaintiluvut.html" rel="" target="">
 <span class="dropdown-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Sijaintiluvut</span></span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./hajontaluvut.html" rel="" target="">
 <span class="dropdown-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Hajontaluvut</span></span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./merkitsevyysluvut.html" rel="" target="">
 <span class="dropdown-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Merkitsevyysluvut</span></span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./eiparametrisettestit.html" rel="" target="">
 <span class="dropdown-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Ei-parametriset testit</span></span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./ttesti.html" rel="" target="">
 <span class="dropdown-text"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">T-testi</span></span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./korrelaatio.html" rel="" target="">
 <span class="dropdown-text"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">Korrelaatio</span></span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./khiinneliö.html" rel="" target="">
 <span class="dropdown-text"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">Khiin neliö <span class="math inline">\(\chi^2\)</span></span></span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-excel-toiminnot" role="button" data-bs-toggle="dropdown" aria-expanded="false" rel="" target="">
 <span class="menu-text">Excel-toiminnot</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-excel-toiminnot">    
        <li>
    <a class="dropdown-item" href="./excelinperusteet.html" rel="" target="">
 <span class="dropdown-text"><span class="chapter-number">13</span>&nbsp; <span class="chapter-title">Excelin perusteet</span></span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./excelinkäyttöliittymä.html" rel="" target="">
 <span class="dropdown-text"><span class="chapter-number">14</span>&nbsp; <span class="chapter-title">Excelin käyttöliittymä</span></span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./nimeäminenexcelissä.html" rel="" target="">
 <span class="dropdown-text"><span class="chapter-number">15</span>&nbsp; <span class="chapter-title">Nimeäminen Excelissä</span></span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./yleisiätoimintoja.html" rel="" target="">
 <span class="dropdown-text"><span class="chapter-number">16</span>&nbsp; <span class="chapter-title">Yleisiä toimintoja Excelissä</span></span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./excelgrafiikka.html" rel="" target="">
 <span class="dropdown-text"><span class="chapter-number">17</span>&nbsp; <span class="chapter-title">Grafiikka Excelissä</span></span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./funktiot.html" rel="" target="">
 <span class="dropdown-text"><span class="chapter-number">18</span>&nbsp; <span class="chapter-title">Funktiot</span></span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./lambdakaavat.html" rel="" target="">
 <span class="dropdown-text"><span class="chapter-number">19</span>&nbsp; <span class="chapter-title">LAMBDA-kaavoja</span></span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-työkalut" role="button" data-bs-toggle="dropdown" aria-expanded="false" rel="" target="">
 <span class="menu-text">Työkalut</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-työkalut">    
        <li>
    <a class="dropdown-item" href="./webropol.html" rel="" target="">
 <span class="dropdown-text"><span class="chapter-number">20</span>&nbsp; <span class="chapter-title">Webropol</span></span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./tilastotyökalut.html" rel="" target="">
 <span class="dropdown-text"><span class="chapter-number">21</span>&nbsp; <span class="chapter-title">Tilastotyökalut</span></span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./dmptuuli.html" rel="" target="">
 <span class="dropdown-text"><span class="chapter-number">22</span>&nbsp; <span class="chapter-title">DMPTuuli</span></span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./tietoarkistot.html" rel="" target="">
 <span class="dropdown-text"><span class="chapter-number">23</span>&nbsp; <span class="chapter-title">Tietoarkistot</span></span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./zotero.html" rel="" target="">
 <span class="dropdown-text"><span class="chapter-number">24</span>&nbsp; <span class="chapter-title">Zotero-lähdehallintatyökalu</span></span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="./viiteluettelo.html" rel="" target="">
 <span class="menu-text">Viiteluettelo</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./history.html" rel="" target="">
 <span class="menu-text">Päivityshistoria</span></a>
  </li>  
</ul>
            <div class="quarto-navbar-tools ms-auto">
    <a href="https://github.com/osaal/KVANT-23-PEO/" rel="" title="Source Code" class="quarto-navigation-tool px-1" aria-label="Source Code"><i class="bi bi-github"></i></a>
</div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Vaihda sivupalkki" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
      <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./korrelaatio.html"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">Korrelaatio</span></a></li></ol></nav>
      <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Vaihda sivupalkki" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
      </a>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal sidebar-navigation docked overflow-auto">
    <div class="pt-lg-2 mt-2 text-end sidebar-header sidebar-header-stacked">
      <a href="./index.html" class="sidebar-logo-link">
      <img src="./pics/logo_nimi_nega.png" alt="" class="sidebar-logo py-0 d-lg-inline d-none">
      </a>
      </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./mittaustasot.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Muuttuja ja mittaustasot</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./hypoteesitestaus.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Hypoteesitestaus</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./mallioletukset.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Mallioletukset ja virhe</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./sijaintiluvut.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Sijaintiluvut</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./hajontaluvut.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Hajontaluvut</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./merkitsevyysluvut.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Merkitsevyysluvut</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./eiparametrisettestit.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Ei-parametriset testit</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./ttesti.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">T-testi</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./korrelaatio.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">Korrelaatio</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./khiinneliö.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">Khiin neliö <span class="math inline">\(\chi^2\)</span></span></span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active" data-toc-expanded="99">
    <h2 id="toc-title">Sisällysluettelo</h2>
   
  <ul>
  <li><a href="#sec-kovarianssin-määritelmä" id="toc-sec-kovarianssin-määritelmä" class="nav-link active" data-scroll-target="#sec-kovarianssin-määritelmä"><span class="header-section-number">11.1</span> Kovarianssin määritelmä</a></li>
  <li><a href="#sec-korrelaatiokertoimen-mallioletukset" id="toc-sec-korrelaatiokertoimen-mallioletukset" class="nav-link" data-scroll-target="#sec-korrelaatiokertoimen-mallioletukset"><span class="header-section-number">11.2</span> Korrelaatiokertoimen mallioletukset</a>
  <ul class="collapse">
  <li><a href="#sec-mittataso-korrelaatiokertoin" id="toc-sec-mittataso-korrelaatiokertoin" class="nav-link" data-scroll-target="#sec-mittataso-korrelaatiokertoin"><span class="header-section-number">11.2.1</span> Mittataso</a></li>
  <li><a href="#sec-täydellisesti-paritettu-data-korrelaatiokertoin" id="toc-sec-täydellisesti-paritettu-data-korrelaatiokertoin" class="nav-link" data-scroll-target="#sec-täydellisesti-paritettu-data-korrelaatiokertoin"><span class="header-section-number">11.2.2</span> Täydellisesti paritettu data</a></li>
  <li><a href="#sec-ääripääpisteiden-poissaolo-korrelaatiokertoin" id="toc-sec-ääripääpisteiden-poissaolo-korrelaatiokertoin" class="nav-link" data-scroll-target="#sec-ääripääpisteiden-poissaolo-korrelaatiokertoin"><span class="header-section-number">11.2.3</span> Ääripääpisteiden poissaolo</a></li>
  <li><a href="#sec-normaalijakautuminen-korrelaatiokertoin" id="toc-sec-normaalijakautuminen-korrelaatiokertoin" class="nav-link" data-scroll-target="#sec-normaalijakautuminen-korrelaatiokertoin"><span class="header-section-number">11.2.4</span> Normaalijakautuminen</a></li>
  <li><a href="#sec-lineariteetti-korrelaatiokertoin" id="toc-sec-lineariteetti-korrelaatiokertoin" class="nav-link" data-scroll-target="#sec-lineariteetti-korrelaatiokertoin"><span class="header-section-number">11.2.5</span> Lineariteetti</a></li>
  </ul></li>
  <li><a href="#sec-korrelaatiokertoimen-laskeminen" id="toc-sec-korrelaatiokertoimen-laskeminen" class="nav-link" data-scroll-target="#sec-korrelaatiokertoimen-laskeminen"><span class="header-section-number">11.3</span> Korrelaatiokertoimen laskeminen</a></li>
  <li><a href="#sec-korrelaatiokertoimen-laskeminen-excelissä" id="toc-sec-korrelaatiokertoimen-laskeminen-excelissä" class="nav-link" data-scroll-target="#sec-korrelaatiokertoimen-laskeminen-excelissä"><span class="header-section-number">11.4</span> Korrelaatiokertoimen laskeminen Excelissä</a></li>
  <li><a href="#sec-korrelaatiokertoimen-raportointi" id="toc-sec-korrelaatiokertoimen-raportointi" class="nav-link" data-scroll-target="#sec-korrelaatiokertoimen-raportointi"><span class="header-section-number">11.5</span> Korrelaatiokertoimen raportointi</a></li>
  </ul>
<div class="toc-actions"><div><i class="bi bi-github"></i></div><div class="action-links"><p><a href="https://github.com/osaal/KVANT-23-PEO/issues/new" class="toc-action">Ilmoita ongelmasta</a></p></div></div></nav>
    </div>
<!-- main -->
<main class="content page-columns page-full" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title"><span id="sec-korrelaatio-teoria" class="quarto-section-identifier"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">Korrelaatio</span></span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<p><strong>Mittausasteikot:</strong> Välimatka- ja suhdeasteikko</p>
<p><strong>Korrelaatio</strong> on mitta kahden muuttujan yhteisvaihtelusta. Nimi tulee englannin sanoista <em>co-relation</em>, eli yhteissuhde. Korrelaatiomittoja on monia, joista tässä luvussa käsittellään vain <strong>Pearsonin korrelaatiokerrointa</strong>. <a href="eiparametrisettestit.html">Luvussa&nbsp;<span>9</span></a> käydään läpi ei-parametrinen vaihtoehto Pearsonin kertoimelle, <strong>Spearmanin rho</strong>.</p>
<p><u>Pearsonin korrelaatiokerroin</u> <span class="math inline">\(r\)</span> on standardisoitu versio <strong>kovarianssista</strong>. Jotta ymmärrtäisi Pearsonin kertoimen, on siis hyvä ensin ymmärtää kovarianssi.</p>
<section id="sec-kovarianssin-määritelmä" class="level2 page-columns page-full" data-number="11.1">
<h2 data-number="11.1" class="anchored" data-anchor-id="sec-kovarianssin-määritelmä"><span class="header-section-number">11.1</span> Kovarianssin määritelmä</h2>
<p>Muistutuksena (ks. <a href="hajontaluvut.html#sec-varianssi-teoria"><span>Alaluku&nbsp;6.6</span></a>), <u>varianssin määritelmä oli kaikkien arvopisteiden neliöerot keskiarvoon, jaattuna vapausasteilla</u>.</p>
<p><u>Kovarianssi ilmaisee kahden muuttujan yhteisvaihtelua yhden muuttujan vaihtelun sijaan</u>. Koska jonkun asian nostaminen toiseen potenssiin on sama asia kuin sen kertominen itsellään, kovarianssissa korvataan toinen kertomista toisen muuttujan arvopisteiden eroilla keskiarvoon. Toisin sanoen, lasketaan jokaiselle datariville sen ero keskiarvoon kummallakin muuttujalla, ja kerrotaan nämä tulokset yhteen. Samankaltaisuus näkyy hyvin kaaviossa:</p>
<p><span id="eq-korr-1"><span class="math display">\[
\text{Var} = \frac{\sum{(x-\bar{x})(x-\bar{x})}} {n-1}, \text{Cov} = \frac{\sum{(x-\bar{x})(x-\bar{y})}} {n-1}
\tag{11.1}\]</span></span></p>
<p>Jos varianssi (<span class="math inline">\(\text{Var}\)</span>) edustaa yhden muuttujan keskivertaista vaihtelua, <u>kovarianssi (</u><span class="math inline">\(\text{Cov}\)</span>) <u>edustaa kahden muuttujan välistä vaihtelusuhdetta</u>. Kovarianssi siis osoittaa, miten toisen muuttujan arvot muuttuvat kuin ensimmäinen muuttuu.</p>
<p><strong>Positiivinen kovarianssi</strong> ilmaisee, että ensimmäisen muuttujan erotessa keskiarvosta, toinen muuttuja eroaa keskiarvosta samaan suuntaan. <strong>Negatiivinen kovarianssi</strong> taas ilmaisee, että toisen muuttujan ero keskiarvoon menee toiseen suuntaan kuin ensimmäisen muuttujan ero keskiarvoon.</p>
<div class="page-columns page-full"><p><u>Voit ajatella nämä suorina käyrinä pistekaaviolla</u>: positiivisessa kovarianssissa käyrä osoittaa ylöspäin alavasemmalta; negatiivisessa kovarianssissa käyrä osoittaa alaspäin ylävasemmalta; ja nollakovarianssissa käyrä on vaakasuora (ei suhdetta). Katso esimerkkikuvat alla (<a href="#fig-korrelaatio">Kuva&nbsp;<span>11.1</span></a>)<a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a>:</p><div class="no-row-height column-margin column-container"><li id="fn1"><p><sup>1</sup>&nbsp;Kuvissa esitetään korrelaatiokertointa <span class="math inline">\(r\)</span>, mutta ajatus on täysin sama.</p></li></div></div>
<div id="fig-korrelaatio" class="cell quarto-layout-panel" data-hash="korrelaatio_cache/html/fig-korrelaatio_d123e00ee991ba55389c3ac3dbe51e5d">
<figure class="figure">
<div class="quarto-layout-row quarto-layout-valign-top">
<div class="cell-output-display quarto-layout-cell quarto-layout-cell-subref" style="flex-basis: 33.3%;justify-content: center;">
<div id="fig-korrelaatio-1" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="korrelaatio_files/figure-html/fig-korrelaatio-1.png" class="img-fluid figure-img" data-ref-parent="fig-korrelaatio" width="672"></p>
<figcaption class="figure-caption">(a) r = -0.5</figcaption>
</figure>
</div>
</div>
<div class="cell-output-display quarto-layout-cell quarto-layout-cell-subref" style="flex-basis: 33.3%;justify-content: center;">
<div id="fig-korrelaatio-2" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="korrelaatio_files/figure-html/fig-korrelaatio-2.png" class="img-fluid figure-img" data-ref-parent="fig-korrelaatio" width="672"></p>
<figcaption class="figure-caption">(b) r = 0</figcaption>
</figure>
</div>
</div>
<div class="cell-output-display quarto-layout-cell quarto-layout-cell-subref" style="flex-basis: 33.3%;justify-content: center;">
<div id="fig-korrelaatio-3" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="korrelaatio_files/figure-html/fig-korrelaatio-3.png" class="img-fluid figure-img" data-ref-parent="fig-korrelaatio" width="672"></p>
<figcaption class="figure-caption">(c) r = 0.5</figcaption>
</figure>
</div>
</div>
</div>
<p></p><figcaption class="figure-caption">Kuva&nbsp;11.1: Korrelaatioita eri tasoilla</figcaption><p></p>
</figure>
</div>
<p><u>Kovarianssi mitataan samoissa yksiköissä kuin alkuperäiset muuttujat</u>, mutta kerrottuna toistensa kanssa. Jos molempien muuttujien mittayksikkö on metriä, kovarianssi on <span class="math inline">\(\text{metri}*\text{metri}\)</span>, eli neliömetriä. Jos kuitenkin ensimmäinen muuttuja olisi metreissä mutta toinen euroissa, kovarianssin mittayksikkö olisi “eurometrejä”.</p>
<p><u>Kovarianssin käyttö on jokseenkin hankalaa</u>, koska mittayksiköt eivät ole standardisoituja eivätkä usein tarkoita mitään todellista. Tämän takia kovarianssi standardisoidaan, jolloin saadaan <strong>Pearsonin korrelaatiokerroin</strong> <span class="math inline">\(r\)</span>.</p>
</section>
<section id="sec-korrelaatiokertoimen-mallioletukset" class="level2" data-number="11.2">
<h2 data-number="11.2" class="anchored" data-anchor-id="sec-korrelaatiokertoimen-mallioletukset"><span class="header-section-number">11.2</span> Korrelaatiokertoimen mallioletukset</h2>
<p>Korrelaatiokertoimella on suhteellisen vähän oletuksia, mutta ne vaikuttavat suurestikin kertoimen luotettavuuteen. Nämä ovat: <strong>mittataso, täydellisesti paritettu data, ääripääpisteiden poissaolo,</strong> (virheiden) <strong>normaalijakautuminen</strong> ja <strong>lineaariteetti</strong>.</p>
<section id="sec-mittataso-korrelaatiokertoin" class="level3" data-number="11.2.1">
<h3 data-number="11.2.1" class="anchored" data-anchor-id="sec-mittataso-korrelaatiokertoin"><span class="header-section-number">11.2.1</span> Mittataso</h3>
<p>Kuten aikaisemmin mainittu, Pearsonin <span class="math inline">\(r\)</span> toimii vain muuttujille, jotka ovat <strong>välimatka- ja suhdeasteikolla</strong>. Tämä juontuu laskutavasta, jossa käytetään keskiarvoa ja keskihajontaa, joita voi vain käyttää näillä tasoilla.</p>
<p><u>Jos muuttujasi ovat järjestysasteikolla</u>, voit käyttää <strong>Spearmanin korrelaatiokertointa</strong> tai <strong>khiin neliötä</strong>. <u>Jos muuttajasi taas ovat vain luokitteluasteikolla</u>, <strong>khiin neliö</strong> on paras vaihtoehto.</p>
<p><u>Jos käytät vääriä tasoja, korrelaatiokerroin on virallisesti tulkitsematon</u>. Järjestysasteikolla tehty korrelaatio voi myös arvioida mittaa suurestikin yläkanttiin, joten näillä kannattaa olla varovainen. Spearmanin korrelaatiokerroin on varmempi työkalu tässä tilanteessa, ja khiin neliö helpommin tulkittavissa.</p>
</section>
<section id="sec-täydellisesti-paritettu-data-korrelaatiokertoin" class="level3" data-number="11.2.2">
<h3 data-number="11.2.2" class="anchored" data-anchor-id="sec-täydellisesti-paritettu-data-korrelaatiokertoin"><span class="header-section-number">11.2.2</span> Täydellisesti paritettu data</h3>
<p><strong>Jokaisella rivillä tulisi olla arvo molemmilla muuttujilla</strong>. Tämä juontuu siitä, että kaikkia arvoja käytetään ja summataan yhteen.</p>
<p><u>Jos sinulla on puuttuvaa dataa</u>, se ei sinänsä ole vielä vaarallista. Huomaa kuitenkin, että mitä enemmän dataa puuttuu, sitä huonommin korrelaatiokerroin kuvastaa koko datajakaumaa.</p>
<p><u>Yleensä tapana on jättää pois kaikki rivit joilla on epätäydellistä dataa</u> - ilmoita siksi aina, kuinka suuri <span class="math inline">\(n\)</span> sinulla on korrelaatiokertoimen laskennassa! Muista myös korjata <span class="math inline">\(n\)</span> itse laskukaavassa datamäärän mukaan.</p>
</section>
<section id="sec-ääripääpisteiden-poissaolo-korrelaatiokertoin" class="level3" data-number="11.2.3">
<h3 data-number="11.2.3" class="anchored" data-anchor-id="sec-ääripääpisteiden-poissaolo-korrelaatiokertoin"><span class="header-section-number">11.2.3</span> Ääripääpisteiden poissaolo</h3>
<p>Ääripääpisteet vaikuttavat suuresti keskiarvoon, ja siksi ne vaikuttavat myös suuresti korrelaatiokertoimeen. Niiden poisto on erittäin suotavaa (ks. <a href="mallioletukset.html#sec-mallioletusten-testaaminen-tilastollisesti"><span>Alaluku&nbsp;5.2</span></a>).</p>
</section>
<section id="sec-normaalijakautuminen-korrelaatiokertoin" class="level3" data-number="11.2.4">
<h3 data-number="11.2.4" class="anchored" data-anchor-id="sec-normaalijakautuminen-korrelaatiokertoin"><span class="header-section-number">11.2.4</span> Normaalijakautuminen</h3>
<p>Pearsonin <span class="math inline">\(r\)</span>-suureen oikeellisuuden takaamiseksi <strong>molempien muuttujien keskiarvot tulisivat tulla normaalijakautumasta</strong>. Tämä voidaan olettaa suurissa otoksissa.</p>
<p><u>Jos otoksesi kuitenkin on pieni</u>, ei-parametrinen testi (Spearmanin rho) on parempi vaihtoehto.</p>
<p>Tämän lisäksi korrelaatiokerroin olettaa, että <strong>virhemittaus on normaalijakautunut</strong>. Voit tarkistaa oletuksen laskemalla jokaisen rivin muuttujien erotukset keskiarvoihin <span class="math inline">\(\bar{x}-x\)</span> ja <span class="math inline">\(\bar{y}-y\)</span>, ja tarkistaa niiden histogrammit (pylväskaaviot; ks. <a href="visualisoinninalkeet.html#sec-pylväskaavio-teoria"><span>Alaluku&nbsp;1.4.1</span></a>). Molempien virhekaavioiden tulisi asettua jokseenkin normaalikäyrän mukaisesti, jossa yleisin virhearvio tulisi olla nolla.</p>
<p><u>Jos näin ei ole, valitse taas ei-parametrinen testi</u>.</p>
</section>
<section id="sec-lineariteetti-korrelaatiokertoin" class="level3" data-number="11.2.5">
<h3 data-number="11.2.5" class="anchored" data-anchor-id="sec-lineariteetti-korrelaatiokertoin"><span class="header-section-number">11.2.5</span> Lineariteetti</h3>
<p>Koska korrelaatiokerroin on lineaarinen malli, <strong>se toimii parhaiten lineaaristen suhteiden mallintamisessa</strong>. Jos muuttujasuhde on epälineaarinen, korrelaatiokerroin ei välttämättä “näe” suhdetta. Jos suhde esimerkiksi on täydellisen positiivisen parabolinen (nousee tiettyyn pisteeseen asti ja laskee sen jälkeen, symmetrisesti), korrelaatiokerroin tulee osoittamaan nollakorrelaatiota - vaikka suhde selkeästi löytyy!</p>
<p><u>Tarkista lineaarisuus pistekaaviolla</u> (<a href="visualisoinninalkeet.html#sec-pistekaavio-teoria"><span>Alaluku&nbsp;1.4.5</span></a>).</p>
<p><u>Jos suhde ei ole lineaarinen</u>, joudut joko muuntamaan muuttujat epälineaarisesti (esim. logaritmilla tai potenssilla), tai hakeutumaan epälineaaristen mallien maailmaan.</p>
</section>
</section>
<section id="sec-korrelaatiokertoimen-laskeminen" class="level2 page-columns page-full" data-number="11.3">
<h2 data-number="11.3" class="anchored" data-anchor-id="sec-korrelaatiokertoimen-laskeminen"><span class="header-section-number">11.3</span> Korrelaatiokertoimen laskeminen</h2>
<p>Kaikille näille laskuille löytyy valmiit LAMBDA-kaavat (<a href="lambdakaavat.html"><span>Luku&nbsp;19</span></a>).</p>
<p><u>Kovarianssi standardisoidaan</u> jakamalla se molempien muuttujien keskihajonnan kertomalla. Matemaattisella yksinkertaistamisella kaavasta tulee:</p>
<p><span id="eq-korr-2"><span class="math display">\[
r = \frac{\text{Cov}} {s_x s_y} = \frac{\sum{(x-\bar{x})(x-\bar{y})}} {(n-1) s_x s_y}
\tag{11.2}\]</span></span></p>
<p><u>Pearsonin</u> <span class="math inline">\(r\)</span> <u>sijoittuu välille</u> <span class="math inline">\([-1; 0; 1]\)</span><u>,</u> vaihdellen täydellisestä negatiivisesta korrelaatiosta nollakorrelaation kautta täydelliseen positiiviseen korrelaation. Kun <span class="math inline">\(r = -1\)</span>, muuttujien välillä on täydellinen negatiivinen korrelaatio: kun ensimmäinen muuttuja nousee arvossaan, toinen muuttuja laskee yhtä paljon (suhteessa mitta-asteikkoon; ks. <a href="#fig-korrelaatio">Kuva&nbsp;<span>11.1</span></a>). Vastakohtana muuttujat nousevat ja laskevat samassa vauhdissa kun <span class="math inline">\(r = 1\)</span>. Nollakorrelaation kohdalla <span class="math inline">\(r = 0\)</span> muuttujien välillä ei ole tilastollista lineaarista suhdetta, eli yhden muuttujan muuttuminen ei näy millään tavalla toisessa muuttujassa.</p>
<p><strong>Korrelaatiokertoimelle voidaan laskea merkitsevyystaso</strong>. Tämä tehdään muuntamalla kerroin t-arvoksi, jonka kriittisen rajan voi tarkistaa kriittisten arvojen taulukosta. Muuntaminen on suhteellisen yksinkertainen:</p>
<p><span id="eq-korr-3"><span class="math display">\[
t_r = \frac{r \sqrt{N-2}} {\sqrt{1-r^2}}
\tag{11.3}\]</span></span></p>
<p>Jakolaskun yläpuolella: kerro korrelaatiokerroin otoskoon minus kaksi neliöjuurella. Jakolaskun alapuolella: ota korrelaatiokertoimen neliö, vähennä se yhdestä, ja ota tuloksen neliöjuuri.</p>
<p><strong>Korrelaatiokertoimelle voi myös laskea luottamusvälin</strong>. Tuolloin kertoimen pitää kuitenkin ensin muuntaa z-arvoksi (ei t-arvoksi), sekä laskea <strong>kertoimen keskivirhe</strong>.</p>
<p><span id="eq-korr-4"><span class="math display">\[
\begin{split}
z_r = \frac{1}{2}\log_e(\frac{1+r}{1-r})
\\ \text{SE}_{z_r} = \frac{1}{\sqrt{N-3}}
\end{split}
\tag{11.4}\]</span></span></p>
<p><strong>Z-arvon laskukaava</strong> on hieman hankala. Laske ensin korrelaatiokerroin plus yksi sekä korrelaatiokerroin minus yksi, ja jaa ensimmäinen toisella. Ota sitten tuloksen luonnollinen logaritmi. Viimeiseksi, kerro tulos puolella, eli 0,5.</p>
<p><strong>Z-arvon keskihajonta</strong> on paljon yksinkertaisempi: vähennä otoskoosta kolme ja ota tuloksen neliöjuuri. Jaa sitten yksi tällä tuloksella, eli hae tuloksen <strong>inverssi</strong>.</p>
<p>Nämä voidaan sitten syöttää suoraan luottamusvälin kaavaan valitsemallamme alfa-arvon z-rajalla (ks. <a href="merkitsevyysluvut.html#sec-luottamusväli-teoria"><span>Alaluku&nbsp;8.3</span></a>). Jos esimerkiksi <span class="math inline">\(\alpha = 0.05\)</span>, niin z-raja on <span class="math inline">\(z = 1.96\)</span>, jolloin laskukaavasta tulee:</p>
<p><span id="eq-korr-5"><span class="math display">\[
\text{CI}_{z_r}^{\alpha = 0.05} = z_r \pm (1.96 \times \text{SE}_{z_r})
\tag{11.5}\]</span></span></p>
<div class="page-columns page-full"><p>Huomaa kuitenkin, että arvot ilmaistaan vielä z-arvoissa, ei Pearsonin <span class="math inline">\(r\)</span>-arvossa! Arvot voidaan kuitenkin kääntää takaisin <span class="math inline">\(r\)</span>-arvoiksi seuraavalla kaavalla<a href="#fn2" class="footnote-ref" id="fnref2" role="doc-noteref"><sup>2</sup></a>:</p><div class="no-row-height column-margin column-container"><li id="fn2"><p><sup>2</sup>&nbsp;Kaava on käytännössä sama kuin <span class="math inline">\(z_r\)</span>, mutta ratkottu <span class="math inline">\(r\)</span>-arvolle. Jos olet haka matemaatikko, voit tarkistaa tämän!</p></li></div></div>
<p><span id="eq-korr-6"><span class="math display">\[
r = \frac{e^{2z_r}-1}{e^{2z_r}+1}
\tag{11.6}\]</span></span></p>
<p>Ensin, laske kaksi kertaa z-arvo. Nosta sitten Eulerin luku tähän potenssiin. Vähennä tuloksesta yksi, ja jaa tämä tulos aikaisemmalla potenssituloksella plus yksi.</p>
</section>
<section id="sec-korrelaatiokertoimen-laskeminen-excelissä" class="level2" data-number="11.4">
<h2 data-number="11.4" class="anchored" data-anchor-id="sec-korrelaatiokertoimen-laskeminen-excelissä"><span class="header-section-number">11.4</span> Korrelaatiokertoimen laskeminen Excelissä</h2>
<p><u>Korrelaatiokertoimen voi onneksi laskea hyvin yksinkertaisesti Excelissä</u> yhdellä kaavalla:</p>
<p><code>PEARSON(matriisi1; matriisi2)</code></p>
<p>Määrittele vain, mitkä matriisit sinulla on käytössä.</p>
<p><u>Valitettavasti kertoimen merkitsevyyden tarkistaminen taas ei ole implementoitu Excelissä</u>. Käytä valmiita LAMBDA-kaavoja (<a href="lambdakaavat.html"><span>Luku&nbsp;19</span></a>) laskeaksesi kertoimen p-arvon t-muunnoksen avulla.</p>
<p>LAMBDA-kaavoina löytyy myös <span class="math inline">\(r\)</span>-arvon z-muunnoksen tekemiseksi sekä <span class="math inline">\(z_r\)</span>-arvon muuntamiseksi takaisin <span class="math inline">\(r\)</span>-arvoksi. Käytä näitä laskeaksesi luottamusvälin valitsemallasi alfatasolla.</p>
<p><u>Huomaa, että tarvitset neljä listattua LAMBDA-funktiota tähän</u>: z-arvon lasku, keskivirheen lasku, luottamusvälin lasku, sekä lasku, joka muuntaa z-arvon takaisin r-arvoksi.</p>
<p><u>Huomaa myös, että luottamusvälin laskukaava (<code>KORR.Z.CI</code>) palauttaa kaksirivisen matriisin</u> - ensimmäinen arvo on luottamusvälin yläraja, toinen arvo on alaraja. Jos tarvitset luottamusvälin sarakkeisiin rivien sijaan, laita funktio <code>TRANSPONOI</code>-funktion sisälle.</p>
</section>
<section id="sec-korrelaatiokertoimen-raportointi" class="level2" data-number="11.5">
<h2 data-number="11.5" class="anchored" data-anchor-id="sec-korrelaatiokertoimen-raportointi"><span class="header-section-number">11.5</span> Korrelaatiokertoimen raportointi</h2>
<p>Raportoi mieluisesti seuraavat tiedot:</p>
<ul>
<li><p>Pearsonin suure <span class="math inline">\(r\)</span></p></li>
<li><p>Otoskoko <span class="math inline">\(n\)</span></p></li>
<li><p>Merkitsevyys <span class="math inline">\(p\)</span></p></li>
<li><p>Luottamusväli <span class="math inline">\(\text{CI}\)</span></p></li>
</ul>
<p>Korrelaatiokertoimelle ei tarvitse laskea testisuuretta, koska se on suuremitta itsessään.</p>


</section>


</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Kopioitu!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Kopioitu!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./ttesti.html" class="pagination-link">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">T-testi</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./khiinneliö.html" class="pagination-link">
        <span class="nav-page-text"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">Khiin neliö <span class="math inline">\(\chi^2\)</span></span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
      &nbsp;
    </div>   
    <div class="nav-footer-center">Tekijänoikeudet (c) 2023, Oliver Saal</div>
    <div class="nav-footer-right">
      &nbsp;
    </div>
  </div>
</footer>



</body></html>