<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="fi" xml:lang="fi"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Kvantitatiiviset menetelmät -kurssin verkkokirja - 10&nbsp; Korrelaatio</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./khiinneliö.html" rel="next">
<link href="./ttesti.html" rel="prev">
<link href="./pics/logo_lapinakyva.png" rel="icon" type="image/png">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 20,
  "language": {
    "search-no-results-text": "Ei tuloksia",
    "search-matching-documents-text": "tulokset",
    "search-copy-link-title": "Kopioi linkki hakuun",
    "search-hide-matches-text": "Piilota loput tulokset",
    "search-more-match-text": "tulos tässä dokumentissa",
    "search-more-matches-text": "tulosta tässä dokumentissa",
    "search-clear-button-title": "Tyhjennä",
    "search-detached-cancel-button-title": "Peruuta",
    "search-submit-button-title": "Lähetä",
    "search-label": "Hae"
  }
}</script>

  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

</head>

<body class="nav-sidebar floating slimcontent">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Vaihda sivupalkki" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
      <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./hypoteesitestaus.html">Tilastotiede</a></li><li class="breadcrumb-item"><a href="./korrelaatio.html"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">Korrelaatio</span></a></li></ol></nav>
      <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Vaihda sivupalkki" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
      </a>
      <button type="button" class="btn quarto-search-button" aria-label="" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-end sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">Kvantitatiiviset menetelmät -kurssin verkkokirja</a> 
        <div class="sidebar-tools-main">
    <a href="https://github.com/osaal/KVANT-23-PEO/" rel="" title="Source Code" class="quarto-navigation-tool px-1" aria-label="Source Code"><i class="bi bi-github"></i></a>
</div>
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Hae"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Aluksi</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="false">
 <span class="menu-text">Ohjeita</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="false" aria-label="Vaihda osio">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./visualisoinninalkeet.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Visualisoinnin alkeet</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./ohjeitaviittaamiseen.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Ohjeita viittaamiseen</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true">
 <span class="menu-text">Tilastotiede</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true" aria-label="Vaihda osio">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./hypoteesitestaus.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Hypoteesitestaus</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./mallioletukset.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Mallioletukset ja virhe</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./sijaintiluvut.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Sijaintiluvut</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./hajontaluvut.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Hajontaluvut</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./merkitsevyysluvut.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Merkitsevyysluvut</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./eiparametrisettestit.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Ei-parametriset testit</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./ttesti.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">T-testi</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./korrelaatio.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">Korrelaatio</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./khiinneliö.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">Khiin neliö <span class="math inline">\(\chi^2\)</span></span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="false">
 <span class="menu-text">Excel-toiminnot</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="false" aria-label="Vaihda osio">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./excelinperusteet.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">Excelin perusteet</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./excelinkäyttöliittymä.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">13</span>&nbsp; <span class="chapter-title">Excelin käyttöliittymä</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./nimeäminenexcelissä.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">14</span>&nbsp; <span class="chapter-title">Nimeäminen Excelissä</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./yleisiätoimintoja.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">15</span>&nbsp; <span class="chapter-title">Yleisiä toimintoja Excelissä</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./excelgrafiikka.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">16</span>&nbsp; <span class="chapter-title">Grafiikka Excelissä</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./funktiot.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">17</span>&nbsp; <span class="chapter-title">Funktiot</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./lambdakaavat.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">18</span>&nbsp; <span class="chapter-title">LAMBDA-kaavoja</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" aria-expanded="false">
 <span class="menu-text">Työkalut</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" aria-expanded="false" aria-label="Vaihda osio">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./webropol.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">19</span>&nbsp; <span class="chapter-title">Webropol</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./tilastotyökalut.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">20</span>&nbsp; <span class="chapter-title">Tilastotyökalut</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./dmptuuli.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">21</span>&nbsp; <span class="chapter-title">DMPTuuli</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./tietoarkistot.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">22</span>&nbsp; <span class="chapter-title">Tietoarkistot</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./zotero.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">23</span>&nbsp; <span class="chapter-title">Zotero-lähdehallintatyökalu</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./viiteluettelo.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Viiteluettelo</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./history.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Päivityshistoria</span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active" data-toc-expanded="99">
    <h2 id="toc-title">Sisällysluettelo</h2>
   
  <ul>
  <li><a href="#kovarianssin-määritelmä" id="toc-kovarianssin-määritelmä" class="nav-link active" data-scroll-target="#kovarianssin-määritelmä"><span class="header-section-number">10.1</span> Kovarianssin määritelmä</a></li>
  <li><a href="#korrelaatiokertoimen-mallioletukset" id="toc-korrelaatiokertoimen-mallioletukset" class="nav-link" data-scroll-target="#korrelaatiokertoimen-mallioletukset"><span class="header-section-number">10.2</span> Korrelaatiokertoimen mallioletukset</a>
  <ul class="collapse">
  <li><a href="#mittataso" id="toc-mittataso" class="nav-link" data-scroll-target="#mittataso"><span class="header-section-number">10.2.1</span> Mittataso</a></li>
  <li><a href="#täydellisesti-paritettu-data" id="toc-täydellisesti-paritettu-data" class="nav-link" data-scroll-target="#täydellisesti-paritettu-data"><span class="header-section-number">10.2.2</span> Täydellisesti paritettu data</a></li>
  <li><a href="#ääripääpisteiden-poissaolo" id="toc-ääripääpisteiden-poissaolo" class="nav-link" data-scroll-target="#ääripääpisteiden-poissaolo"><span class="header-section-number">10.2.3</span> Ääripääpisteiden poissaolo</a></li>
  <li><a href="#normaalijakautuminen" id="toc-normaalijakautuminen" class="nav-link" data-scroll-target="#normaalijakautuminen"><span class="header-section-number">10.2.4</span> Normaalijakautuminen</a></li>
  <li><a href="#lineariteetti" id="toc-lineariteetti" class="nav-link" data-scroll-target="#lineariteetti"><span class="header-section-number">10.2.5</span> Lineariteetti</a></li>
  </ul></li>
  <li><a href="#korrelaatiokertoimen-laskeminen" id="toc-korrelaatiokertoimen-laskeminen" class="nav-link" data-scroll-target="#korrelaatiokertoimen-laskeminen"><span class="header-section-number">10.3</span> Korrelaatiokertoimen laskeminen</a></li>
  <li><a href="#korrelaatiokertoimen-laskeminen-excelissä" id="toc-korrelaatiokertoimen-laskeminen-excelissä" class="nav-link" data-scroll-target="#korrelaatiokertoimen-laskeminen-excelissä"><span class="header-section-number">10.4</span> Korrelaatiokertoimen laskeminen Excelissä</a></li>
  <li><a href="#korrelaatiokertoimen-raportointi" id="toc-korrelaatiokertoimen-raportointi" class="nav-link" data-scroll-target="#korrelaatiokertoimen-raportointi"><span class="header-section-number">10.5</span> Korrelaatiokertoimen raportointi</a></li>
  </ul>
<div class="toc-actions"><div><i class="bi bi-github"></i></div><div class="action-links"><p><a href="https://github.com/osaal/KVANT-23-PEO/issues/new" class="toc-action">Ilmoita ongelmasta</a></p></div></div></nav>
    </div>
<!-- main -->
<main class="content page-columns page-full" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title"><span id="sec-korrelaatio-teoria" class="quarto-section-identifier"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">Korrelaatio</span></span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<p><strong>Mittausasteikot:</strong> Välimatka- ja suhdeasteikko</p>
<p><strong>Korrelaatio</strong> on mitta kahden muuttujan yhteisvaihtelusta. Nimi tulee englannin sanoista <em>co-relation</em>, eli yhteissuhde. Korrelaatiomittoja on monia, joista tässä luvussa käsittellään vain <strong>Pearsonin korrelaatiokerrointa</strong>. <a href="eiparametrisettestit.html">Luvussa&nbsp;<span>8</span></a> käydään läpi ei-parametrisiä vaihtoehtoja Pearsonin korrelaatiolle, Spearmanin korrelaatiokertoin sekä Kendallin tau-b.</p>
<p><u>Pearsonin korrelaatiokertoin</u> <span class="math inline">\(r\)</span> on standardisoitu versio kovarianssista. Jotta ymmärrtäisi Pearsonin kertoimen, on siis hyvä ensin ymmärtää kovarianssi.</p>
<section id="kovarianssin-määritelmä" class="level2" data-number="10.1">
<h2 data-number="10.1" class="anchored" data-anchor-id="kovarianssin-määritelmä"><span class="header-section-number">10.1</span> Kovarianssin määritelmä</h2>
<p>Muistutuksena (ks. <a href="hajontaluvut.html#sec-varianssi-teoria"><span>Alaluku&nbsp;6.6</span></a>), <u>varianssin määritelmä oli kaikkien arvopisteiden neliöerot keskiarvoon, jaattuna vapausasteilla</u>. Yhden muuttujan sijaan kovarianssi ilmaisee kahta muuttujaa. Koska jonkun asian nostaminen toiseen potenssiin on sama asia kuin sen kertominen itsellään, kovarianssissa korvataan toinen kertomista toisen muuttujan arvopisteiden eroilla keskiarvoon. Toisin sanoen, lasketaan jokaiselle datariville sen ero keskiarvoon kummallakin muuttujalla, ja kerrotaan nämä tulokset yhteen. Samankaltaisuus näkyy hyvin kaaviossa:</p>
<p><span id="eq-korr-1"><span class="math display">\[
\text{Var} = \frac{\sum{(x-\bar{x})(x-\bar{x})}} {n-1}, \text{Cov} = \frac{\sum{(x-\bar{x})(x-\bar{y})}} {n-1}
\tag{10.1}\]</span></span></p>
<p>Jos varianssi edustaa yhden muuttujan keskivertaista vaihtelua, <u>kovarianssi edustaa kahden muuttujan välistä vaihtelusuhdetta</u>. Kovarianssi siis osoittaa, miten toisen muuttujan arvot muuttuvat kuin ensimmäinen muuttuu.</p>
<p><strong>Positiivinen kovarianssi</strong> ilmaisee, että ensimmäisen muuttujan erotessa keskiarvosta, toinen muuttuja eroaa keskiarvosta samaan suuntaan. <strong>Negatiivinen kovarianssi</strong> taas ilmaisee, että toisen muuttujan ero keskiarvoon menee toiseen suuntaan kuin ensimmäisen muuttujan ero keskiarvoon.</p>
<p><u>Voit ajatella nämä suorina käyrinä pistekaaviolla</u>: positiivisessa kovarianssissa käyrä osoittaa ylöspäin alavasemmalta; negatiivisessa kovarianssissa käyrä osoittaa alaspäin ylävasemmalta; ja nollakovarianssissa käyrä on vaakasuora (ei suhdetta).</p>
<p><u>Kovarianssi mitataan samoissa yksiköissä kuin alkuperäiset muuttujat</u>, mutta kerrottuna toistensa kanssa. Jos molempien muuttujien mittayksikkö on metriä, kovarianssi on <span class="math inline">\(\text{metri}*\text{metri}\)</span>, eli neliömetriä. Jos kuitenkin ensimmäinen muuttuja olisi metreissä mutta toinen euroissa, kovarianssin mittayksikkö olisi “eurometrejä”.</p>
<p><u>Kovarianssin käyttö on jokseenkin hankalaa</u>, koska mittayksiköt eivät ole standardisoituja eivätkä usein tarkoita mitään todellista. Tämän takia kovarianssi standardisoidaan, jolloin saadaan <strong>Pearsonin korrelaatiokertoin</strong>.</p>
</section>
<section id="korrelaatiokertoimen-mallioletukset" class="level2" data-number="10.2">
<h2 data-number="10.2" class="anchored" data-anchor-id="korrelaatiokertoimen-mallioletukset"><span class="header-section-number">10.2</span> Korrelaatiokertoimen mallioletukset</h2>
<p>Korrelaatiokertoimella on suhteellisen vähän oletuksia, mutta ne vaikuttavat suurestikin kertoimen luotettavuuteen. Nämä ovat: <strong>mittataso, täydellisesti paritettu data, ääripääpisteiden poissaolo,</strong> (virheiden) <strong>normaalijakautuminen</strong> ja <strong>lineariteetti</strong>.</p>
<section id="mittataso" class="level3" data-number="10.2.1">
<h3 data-number="10.2.1" class="anchored" data-anchor-id="mittataso"><span class="header-section-number">10.2.1</span> Mittataso</h3>
<p>Kuten aikaisemmin mainittu, Pearsonin <span class="math inline">\(r\)</span> toimii vain muuttujille, jotka ovat <strong>välimatka- ja suhdeasteikolla</strong>. Tämä juontuu laskutavasta, jossa käytetään mm. keskiarvoa ja keskihajontaa, joita voi vain käyttää näillä tasoilla.</p>
<p><u>Jos muuttujasi ovat järjestysasteikolla</u>, voit käyttää <strong>Spearmanin korrelaatiokertointa</strong> tai <strong>khiin neliötä</strong>. Jos muuttajasi taas ovat vain luokitteluasteikolla, khiin neliö on paras vaihtoehto.</p>
<p><u>Jos käytät vääriä tasoja, korrelaatiokertoin on virallisesti tulkitsematon</u>. Järjestysasteikolla tehty korrelaatio voi myös arvioida mittaa suurestikin yläkanttiin, joten näillä kannattaa olla varovainen. Spearmanin korrelaatiokertoin on varmempi työkalu tässä tilanteessa, ja khiin neliö helpommin tulkittavissa.</p>
</section>
<section id="täydellisesti-paritettu-data" class="level3" data-number="10.2.2">
<h3 data-number="10.2.2" class="anchored" data-anchor-id="täydellisesti-paritettu-data"><span class="header-section-number">10.2.2</span> Täydellisesti paritettu data</h3>
<p><strong>Jokaisella rivillä tulisi olla arvo molemmilla muuttujilla</strong>. Tämä juontuu siitä, että kaikkia arvoja käytetään ja summataan yhteen.</p>
<p><u>Jos sinulla on puuttuvaa dataa</u>, se ei sinänsä ole vielä vaarallista. Huomaa kuitenkin, että mitä enemmän dataa puuttuu, sitä huonommin korrelaatiokertoin kuvastaa koko datajakaumaa.</p>
<p><u>Yleensä tapana on jättää pois kaikki rivit joilla on epätäydellistä dataa</u> - ilmoita siksi aina, kuinka suuri <span class="math inline">\(n\)</span> sinulla on korrelaatiokertoimen laskennassa! Muista myös korjata <span class="math inline">\(n\)</span> itse laskukaavassa datamäärän mukaan.</p>
</section>
<section id="ääripääpisteiden-poissaolo" class="level3" data-number="10.2.3">
<h3 data-number="10.2.3" class="anchored" data-anchor-id="ääripääpisteiden-poissaolo"><span class="header-section-number">10.2.3</span> Ääripääpisteiden poissaolo</h3>
<p>Ääripääpisteet vaikuttavat suurestikin keskiarvoon, ja siksi ne vaikuttavat myös suuresti korrelaatiokertoimeen. Niiden poisto on erittäin suotavaa (ks. <a href="mallioletukset.html#sec-mallioletusten-testaaminen-tilastollisesti"><span>Alaluku&nbsp;4.2</span></a>).</p>
</section>
<section id="normaalijakautuminen" class="level3" data-number="10.2.4">
<h3 data-number="10.2.4" class="anchored" data-anchor-id="normaalijakautuminen"><span class="header-section-number">10.2.4</span> Normaalijakautuminen</h3>
<p>Pearsonin <span class="math inline">\(r\)</span>-suureen oikeellisuuden takaamiseksi <strong>molempien muuttujien keskiarvot tulisivat tulla normaalijakautumasta</strong>. Kuten aikaisemmin mainittu (@sec-normaalijakautuminen-teoria), tämä voidaan olettaa suurissa otoksissa.</p>
<p><u>Jos otoksesi kuitenkin on pieni</u>, ei-parametrinen testi (esim. Spearmanin korrelaatiokertoin, Kendallin tau-b) on parempi vaihtoehto.</p>
<p>Tämän lisäksi korrelaatiokertoin olettaa, että <strong>virhemittaus on normaalijakautunut</strong>. Voit tarkistaa oletuksen laskemalla jokaisen rivin muuttujien erotukset keskiarvoihin, ja tarkistaa niiden histogrammit (pylväskaaviot; ks. <a href="visualisoinninalkeet.html#sec-pylväskaavio-teoria"><span>Alaluku&nbsp;1.4.1</span></a>). Molempien virhekaavioiden tulisi asettua jokseenkin normaalikäyrän mukaisesti.</p>
<p><u>Jos näin ei ole, valitse taas ei-parametrinen testi</u>.</p>
</section>
<section id="lineariteetti" class="level3" data-number="10.2.5">
<h3 data-number="10.2.5" class="anchored" data-anchor-id="lineariteetti"><span class="header-section-number">10.2.5</span> Lineariteetti</h3>
<p>Koska korrelaatiokertoin on lineaarinen malli, <strong>se toimii parhaiten lineaarisia suhteiden mallinnuksessa</strong>. Jos muuttujasuhde on epälineaarinen, korrelaatiokertoin ei välttämättä “näe” suhdetta. Jos suhde esimerkiksi on täydellisen positiivisen parabolinen (nousee tiettyyn pisteeseen asti ja laskee sen jälkeen, symmetrisesti), korrelaatiokertoin tulee osoittamaan nollakorrelaatiota - vaikka suhde selkeästi löytyy!</p>
<p><u>Tarkista lineaarisuus pistekaaviolla</u> (@sec-pistekaavio-teoria).</p>
<p><u>Jos suhde ei ole lineaarinen</u>, joudut joko muuntamaan muuttujat epälineaarisesti (esim. logaritmilla tai potenssilla), tai hakeutumaan epälineaaristen mallien maailmaan.</p>
</section>
</section>
<section id="korrelaatiokertoimen-laskeminen" class="level2 page-columns page-full" data-number="10.3">
<h2 data-number="10.3" class="anchored" data-anchor-id="korrelaatiokertoimen-laskeminen"><span class="header-section-number">10.3</span> Korrelaatiokertoimen laskeminen</h2>
<p><u>Kovarianssi standardisoidaan</u> jakamalla se molempien muuttujien keskihajonnan kertomalla. Matemaattisella yksinkertaistamisella kaavasta tulee:</p>
<p><span id="eq-korr-2"><span class="math display">\[
r = \frac{\text{Cov}} {s_x s_y} = \frac{\sum{(x-\bar{x})(x-\bar{y})}} {(n-1) s_x s_y}
\tag{10.2}\]</span></span></p>
<p><u>Pearsonin</u> <span class="math inline">\(r\)</span> <u>sijoittuu välille</u> <span class="math inline">\([-1; 0; 1]\)</span><u>,</u> vaihdellen täydellisestä negatiivisesta korrelaatiosta nollakorrelaation kautta täydelliseen positiiviseen korrelaation. Kun <span class="math inline">\(r = -1\)</span>, muuttujien välillä on täydellinen negatiivinen korrelaatio: kun ensimmäinen muuttuja nousee arvossaan, toinen muuttuja laskee yhtä paljon (suhteessa mitta-asteikkoon). Vastakohtana muuttujat nousevat ja laskevat samassa vauhdissa kun <span class="math inline">\(r = 1\)</span>. Nollakorrelaation kohdalla <span class="math inline">\(r = 0\)</span> muuttujien välillä ei ole tilastollista lineaarista suhdetta, eli yhden muuttujan muuttuminen ei näy millään tavalla toisessa muuttujassa.</p>
<p><strong>Korrelaatiokertoimelle voidaan laskea merkitsevyystaso</strong>. Tämä tehdään muuntamalla kertoin t-arvoksi, jonka kriittisen rajan voi tarkistaa kriittisten arvojen taulukosta. Muuntaminen on suhteellisen yksinkertainen:</p>
<p><span id="eq-korr-3"><span class="math display">\[
t_r = \frac{r \sqrt{N-2}} {\sqrt{1-r^2}}
\tag{10.3}\]</span></span></p>
<p><strong>Korrelaatiokertoimelle voi myös laskea luottamusvälin</strong>. Tuolloin kertoin pitää kuitenkin ensin muuntaa z-arvoksi (ei t-arvoksi), sekä laskea <strong>kertoimen keskivirhe</strong>.</p>
<p><span id="eq-korr-4"><span class="math display">\[
\begin{split}
z_r = \frac{1}{2}\log_e(\frac{1+r}{1-r})
\\ \text{SE}_{z_r} = \frac{1}{\sqrt{N-3}}
\end{split}
\tag{10.4}\]</span></span></p>
<p>Nämä voidaan sitten syöttää suoraan luottamusvälin kaavaan valitsemallamme alfa-arvon z-rajalla. Jos esimerkiksi <span class="math inline">\(\alpha = 0.05\)</span>, niin z-raja on <span class="math inline">\(z = 1.96\)</span>, jolloin laskukaavasta tulee:</p>
<p><span id="eq-korr-5"><span class="math display">\[
\text{CI}_{z_r}^{\alpha = 0.05} = z_r \pm (1.96 \times \text{SE}_{z_r})
\tag{10.5}\]</span></span></p>
<div class="page-columns page-full"><p>Huomaa kuitenkin, että arvot ilmaistaan vielä z-arvoissa, ei Pearsonin <span class="math inline">\(r\)</span>-arvossa! Arvot voidaan kuitenkin kääntää takaisin <span class="math inline">\(r\)</span>-arvoiksi seuraavalla kaavalla<a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a>:</p><div class="no-row-height column-margin column-container"><li id="fn1"><p><sup>1</sup>&nbsp;Kaava on käytännössä sama kuin <span class="math inline">\(z_r\)</span>, mutta ratkottu <span class="math inline">\(r\)</span>-arvolle. Jos olet haka matemaatikko, voit tarkistaa tämän!</p></li></div></div>
<p><span class="math display">\[
r = \frac{e^{2z_r}-1}{e^{2z_r}+1}
\]</span></p>
</section>
<section id="korrelaatiokertoimen-laskeminen-excelissä" class="level2" data-number="10.4">
<h2 data-number="10.4" class="anchored" data-anchor-id="korrelaatiokertoimen-laskeminen-excelissä"><span class="header-section-number">10.4</span> Korrelaatiokertoimen laskeminen Excelissä</h2>
<p>Korrelaatiokertoimen voi onneksi laskea hyvin yksinkertaisesti Excelissä yhdellä kaavalla:</p>
<p><code>PEARSON(matriisi1; matriisi2)</code></p>
<p>Määrittele vain, mitkä matriisit sinulla on käytössä.</p>
<p><u>Valitettavasti kertoimen merkitsevyyden tarkistaminen taas ei ole implementoitu Excelissä</u>. Käytä valmiita LAMBDA-kaavoja (<a href="lambdakaavat.html"><span>Luku&nbsp;18</span></a>) laskeaksesi kertoimen p-arvon t-muunnoksen avulla.</p>
<p>LAMBDA-kaavoina löytyy myös <span class="math inline">\(r\)</span>-arvon z-muunnoksen tekemiseksi sekä <span class="math inline">\(z_r\)</span>-arvon muuntamiseksi takaisin <span class="math inline">\(r\)</span>-arvoksi. Käytä näitä laskeaksesi luottamusvälin valitsemallasi alfatasolla. Huomaa, että tarvitset neljä listattua LAMBDA-funktiota tähän: z-arvon lasku, keskivirheen lasku, luottamusvälin lasku, sekä lasku, joka muuntaa z-arvon takaisin r-arvoksi. Huomaa myös, että luottamusvälin laskukaava (<code>KORR.Z.CI</code>) palauttaa kaksirivisen matriisin - ensimmäinen arvo on luottamusvälin yläraja, toinen arvo on alaraja. Jos tarvitset luottamusvälin sarakkeisiin rivien sijaan, laita funktio <code>TRANSPONOI</code>-funktion sisälle.</p>
</section>
<section id="korrelaatiokertoimen-raportointi" class="level2" data-number="10.5">
<h2 data-number="10.5" class="anchored" data-anchor-id="korrelaatiokertoimen-raportointi"><span class="header-section-number">10.5</span> Korrelaatiokertoimen raportointi</h2>
<p>Raportoi mieluisesti seuraavat tiedot:</p>
<ul>
<li><p>Pearsonin suure <span class="math inline">\(r\)</span></p></li>
<li><p>Otoskoko <span class="math inline">\(n\)</span></p></li>
<li><p>Merkitsevyys <span class="math inline">\(p\)</span></p></li>
<li><p>Luottamusväli <span class="math inline">\(\text{CI}\)</span></p></li>
</ul>
<p>Korrelaatiokertoimelle ei tarvitse laskea testisuuretta, koska se on suuremitta itsessään.</p>


</section>


</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Kopioitu!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Kopioitu!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./ttesti.html" class="pagination-link">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">T-testi</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./khiinneliö.html" class="pagination-link">
        <span class="nav-page-text"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">Khiin neliö <span class="math inline">\(\chi^2\)</span></span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->



</body></html>